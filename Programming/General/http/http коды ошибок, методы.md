## Основная идея

> [!info]
> **HTTP‑запрос** — это сообщение, которое браузер или мобильное приложение посылает серверу, чтобы получить данные или выполнить действие.  
> Понимание его пути от клика до ответа помогает на собеседовании быстро объяснить, где может сломаться сеть и как починить проблему.

---

## Краткий конспект

* Путь запроса: DNS → TCP → (HTTPS = TLS) → запрос → ответ → закрытие
* Методы: `GET`, `POST`, `PUT`, `PATCH`, `DELETE`, `OPTIONS`, `HEAD`
* Коды: 200, 201, 204, 301, 302, 400, 401, 403, 404, 500
* `GET`, `PUT`, `DELETE` можно повторять без вреда для данных
* `OPTIONS` — «разведка», `HEAD` — «посмотреть, не скачивая»
* Часто спрашивают: `PUT` vs `POST`, 301 vs 302, 401 vs 403
* Важные темы: кеш, HTTPS‑рукопожатие, повторные запросы

---

## Что происходит при HTTP‑запросе?

1. **Поиск IP‑адреса (DNS)**  
   Домен `example.com` переводится в цифровой IP. Сначала браузер смотрит кеш, затем спрашивает DNS‑сервер провайдера.

2. **Создание TCP‑соединения**  
   Клиент и сервер обмениваются короткими пакетами (SYN ↔ ACK). Это «рукопожатие» открывает канал.

3. **Шифрование (TLS) — только для HTTPS**  
   Ещё один мини‑диалог: стороны договариваются о ключах и проверяют сертификат.

4. **Отправка запроса**

   ```http
   GET /photos/cat.jpg HTTP/1.1
   Host: example.com
```

5. **Обработка на сервере**  
    Сервер ищет нужный ресурс или запускает логику приложения.
    
6. **Получение ответа**
    
  ```http
	  HTTP/1.1 200 OK
	  Content-Type: image/jpeg
	  (байты картинки)
```

5. **Закрытие или удержание соединения**  
    Заголовок `Connection: keep-alive` оставит канал открытым для следующих запросов и сэкономит время.
    

> [!tip]  
> На собеседовании удобно нарисовать цепочку: «клиент → DNS → TCP → TLS → HTTP → сервер».

---

## Частые HTTP‑методы

|Метод|Что делает|Повторение без вреда?|Пример curl|
|---|---|---|---|
|`GET`|Получить данные|Да|`curl https://api.com/users`|
|`POST`|Создать или запустить действие|Нет|`curl -X POST -d '{"name":"Ann"}' https://api.com/users`|
|`PUT`|Полностью заменить ресурс|Да|`curl -X PUT -d @file.json https://api.com/item/7`|
|`PATCH`|Частично изменить ресурс|Чаще — да|`curl -X PATCH -d '{"email":"a@b"}' https://api.com/u/7`|
|`DELETE`|Удалить ресурс|Да|`curl -X DELETE https://api.com/item/7`|
|`OPTIONS`|Узнать, что разрешено|Да|`curl -X OPTIONS -i https://api.com`|
|`HEAD`|Только заголовки|Да|`curl -I https://site.com/img.png`|

---

## Коды ответа и что о них спрашивают

|Код|Что значит|Частый вопрос|Ответ|
|---|---|---|---|
|200 OK|Всё хорошо, тело есть|Должен ли `GET` возвращать тело?|Да: HTML, JSON, файл|
|201 Created|Ресурс создан, URL в `Location`|Чем отличается от 200?|Создание нового|
|204 No Content|Успех без тела|Когда полезно?|`DELETE`, обновление без ответа|
|301 Moved Permanently|Постоянный редирект|Как кешируется?|Браузер запоминает навсегда|
|302 Found|Временный редирект|Почему не REST?|Клиенты могут не следовать|
|400 Bad Request|Неверные данные клиента|Как находить?|Проверять JSON, параметры|
|401 Unauthorized|Нет логина или токена|Разница с 403?|401 — нет токена|
|403 Forbidden|Прав нет, токен есть|Когда 403?|Пользователь не допущен|
|404 Not Found|Ресурс не найден|Влияет на SEO?|Да, выпадает из поиска|
|500 Internal Server Error|Сервер сломался|Что делать?|Смотреть логи|

---

## Типовые вопросы на собеседовании — и короткие ответы

|Вопрос|Ответ|
|---|---|
|`PUT` vs `POST`|`PUT` — обновление по адресу; `POST` — создание, URL решает сервер|
|Зачем `HEAD`?|Получить мета‑информацию без тела (размер, тип)|
|Разница 301 и 302?|301 — навсегда; 302 — временно, не кешируется|
|401 vs 403?|401 — не авторизован, 403 — запрещено|
|Что делает `OPTIONS`?|Запрос, какие методы/заголовки разрешены|
|Почему `GET` безопасен?|Он только читает, не изменяет данные|
|Что кешируется?|По `Cache-Control`, `ETag`, `Last-Modified`|
|HTTP/2: сколько соединений?|Одно — с несколькими потоками|

---

> [!warning]  
> **На что ещё обращают внимание:**
> 
> - **Кеш:** устаревшие данные без `ETag`/`Cache-Control`
>     
> - **Повторные запросы:** могут отправиться повторно из-за проблем сети
>     
> - **Безопасные методы:** `GET`, `HEAD`, `OPTIONS` не должны изменять данные
>     
> - **Редиректы:** лишние `301/302` = дополнительная задержка
>     
> - **HTTPS:** шифрует токены и логины
>     

---
## FAQ

> [!faq]  
> **Q:** Почему ответ пришёл, а страница не обновилась?  
> **A:** Возможно, это 204 или 304 без тела — браузер использует кеш.  
>  
> **Q:** Можно ли тело в `DELETE`?  
> **A:** Формально да, но большинство серверов игнорирует — параметры лучше в URL.  
>  
> **Q:** Когда использовать `PATCH`, а не `PUT`?  
> **A:** Если нужно изменить только 1‑2 поля, а не весь объект.  
>  
> **Q:** Что делает `Keep‑Alive`?  
> **A:** Держит TCP‑соединение открытым для следующих запросов без нового рукопожатия.

---

## Полезные ссылки

- [RFC 9110 — HTTP Semantics](https://www.rfc-editor.org/rfc/rfc9110.html)
    
- [MDN: HTTP Status Codes](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status)
    
- [DEV: HTTP request lifecycle](https://dev.to/dangolant/things-i-brushed-up-on-this-week-the-http-request-lifecycle-)

[[http1 vs http 2|Следующая статья]]