> [!info] Основная идея  
> Нормализация — это методика проектирования структуры базы данных, направленная на устранение избыточности и обеспечение логической целостности данных. В PostgreSQL нормализация особенно полезна для сложных систем с большим количеством связанных таблиц, где важно поддерживать читаемость, масштабируемость и удобство сопровождения данных.

---

## Краткий конспект

- **Нормализация** устраняет дублирование и повышает целостность данных.
- Каждая **нормальная форма** накладывает всё более строгие условия на таблицы.
- В PostgreSQL соблюдение форм достигается через структуру таблиц и внешние ключи.
- 1NF требует атомарности, 2NF — устранения частичных зависимостей, 3NF — исключения транзитивных.
- **BCNF** усиливает 3NF, устраняя даже те зависимости, что не нарушают первичный ключ.
- Ошибки нормализации могут привести к дублированию, аномалиям обновления и трудностям при масштабировании.

---

## Подробно

### Что такое нормализация?

**Нормализация** — это процесс организации данных в базе данных так, чтобы устранить избыточность и обеспечить логическую связность. Она основана на теории функциональных зависимостей между атрибутами и делится на последовательные **нормальные формы (Normal Forms)**.

Каждая следующая форма основывается на предыдущей и усиливает требования к структуре таблицы.

---

### Первая нормальная форма (1NF)

**Определение:**  
Таблица находится в **1NF**, если:

- Все значения в таблице **атомарны** (нет массивов, списков и т.п.)
- В таблице нет повторяющихся колонок с похожим значением
- Есть ключ


---

### Вторая нормальная форма (2NF)

**Определение:**  
Таблица в **2NF**, если:

- Находится в **1NF**.
    
- Все **неключевые столбцы** зависят **от всего первичного ключа**, а не его части.
    

---

### Третья нормальная форма (3NF)

**Определение:**  
Таблица в **3NF**, если:

- Находится в **2NF**.
    
- Неключевой столбец не должен зависеть от ключа **через** другой неключевой столбец
    


---

### Нормальная форма Бойса–Кодда (BCNF)

**Определение:**  
BCNF — это **усиленная 3NF**. Таблица находится в BCNF, если:

- если какое-то поле `X` **однозначно задаёт** другое поле `Y` (`X → Y`), то **`X` обязан быть суперключом** (по `X` должна находиться вся строка).
    

---

> [!warning] Ошибки
> 
> - Дублирование данных в одной таблице (например, повторяющиеся адреса).
>     
> - Отказ от `FOREIGN KEY` во имя "гибкости".
>     
> - Использование массивов, JSON и `TEXT`-полей вместо отдельных таблиц.
>     
> - Проектирование без понимания функциональных зависимостей.
>     
> - Слишком ранняя денормализация во имя производительности.
>     

---

> [!faq]  
> **Q: Нужно ли всегда доходить до BCNF?**  
> A: Не обязательно. 3NF в большинстве случаев достаточно.
> 
> **Q: Зачем нормализовать, если данные маленькие?**  
> A: Нормализация помогает избегать логических ошибок и облегчает расширение модели.
> 
> **Q: Можно ли использовать массивы в PostgreSQL и соблюдать 1NF?**  
> A: Теоретически — нет. Атомарность нарушается.
> 
> **Q: Как проверить нормальную форму?**  
> A: Анализировать зависимости между атрибутами и определять, нарушают ли они правила форм.
---

### Полезные ссылки

- [PostgreSQL: Constraints and Foreign Keys](https://www.postgresql.org/docs/current/ddl-constraints.html)
    
- [DigitalOcean: Database Normalization](https://www.digitalocean.com/community/tutorials/database-normalization?utm_source=chatgpt.com)
    
- [freeCodeCamp: Normal Forms Guide](https://www.freecodecamp.org/news/database-normalization-1nf-2nf-3nf-table-examples/?utm_source=chatgpt.com)
    
- [TigerData: PostgreSQL Normalization](https://www.tigerdata.com/learn/how-to-use-postgresql-for-data-normalization?utm_source=chatgpt.com)
    
- [GeeksforGeeks: Normal Forms in DBMS](https://www.geeksforgeeks.org/dbms/normal-forms-in-dbms/?utm_source=chatgpt.com)
