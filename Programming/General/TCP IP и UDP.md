> [!info] Основная идея  
> **TCP/IP‑стек** — это иерархия сетевых протоколов, где IP отвечает за доставку пакетов между узлами, а TCP и UDP работают на транспортном уровне. **TCP** надёжен: устанавливает соединение, контролирует порядок и восстанавливает потери; **UDP** легче: отправляет дейтаграммы без подтверждений и с минимальной задержкой.

---

## Краткий конспект
- **TCP** — соединение, гарантии доставки и порядка  
- **UDP** — без соединения, минимальный overhead  
- **Где использовать** — HTTP/файлы (TCP) | VoIP, DNS, игры (UDP)  

---

### Что такое TCP/IP?
Стек TCP/IP делит передачу данных на четыре уровня:  
**Link** (Ethernet/Wi‑Fi) → **Internet** (IP адресация и маршрутизация) → **Transport** (TCP, UDP + порты для процессов) → **Application** (HTTP, DNS и т.д.).  
Каждый уровень решает свою задачу, опираясь на сервисы нижележащего.

### TCP
1. **Handshake 3‑way**: SYN → SYN‑ACK → ACK — устанавливает соединение и начальные номера последовательностей.  
2. **Гарантии**: нумерация байт, подтверждения (ACK) и ретрансляции обеспечивают доставку и порядок.  
3. **Контроль перегрузки**: алгоритмы (AIMD, CUBIC) адаптируют скорость к состоянию сети, предотвращая коллапс.

### UDP
1. **Без соединения**: каждое сообщение отправляется сразу, серверу не нужно держать состояние.  
2. **Нет гарантий**: потери, дубликаты и неупорядоченность остаются на совести приложения.  
3. **Минимальный заголовок**: 8 байт → меньше оверхеда и быстрее обработка.

### Главное отличие

| Свойство      | TCP                | UDP                 |
|---------------|--------------------|---------------------|
| Надёжность    | Да (ACK + retry)   | Нет                 |
| Порядок       | Гарантируется      | Не гарантируется    |
| Размер заголовка | ≥ 20 байт          | 8 байт              |
| Задержка      | Выше (handshake)   | Ниже (нет handshake)|

### Когда выбирать каждый
- **TCP**  
  • Веб‑трафик (HTTP/1.1, HTTP/2)  
  • Передача файлов (FTP, SFTP)  
  • Базы данных по сети  
- **UDP**  
  • Стриминг аудио/видео  
  • DNS‑запросы (малый пакет, важна скорость)  
  • Онлайн‑игры и телеметрия в реальном времени  

> [!tip]  
> На собеседовании начните с определения TCP/IP, затем кратко перечислите три свойства TCP и UDP, и закончите примерами сценариев.

> [!warning]  
> Частая ошибка: утверждать, что **UDP всегда быстрее**. На плохих каналах повторная отправка данных в самом приложении может свести преимущество на нет.

> [!faq] Почему HTTP/3 использует UDP?  
> Протокол **QUIC** строит поверх UDP собственный слой надёжности и мультиплексирования, обходя ограничения TCP (handshake, Head‑of‑Line blocking) и сохраняя совместимость с NAT/фаерволами.

---

## Полезные ссылки
- [RFC 793 — Transmission Control Protocol](https://www.rfc-editor.org/rfc/rfc793)
    
- [RFC 768 — User Datagram Protocol](https://www.rfc-editor.org/rfc/rfc768)