> [!info] –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è  
> –û–ø–µ—Ä–∞—Ç–æ—Ä `select` –≤ Go –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∫–∞–Ω–∞–ª–∞–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –ü—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–µ—Ç–æ–∫ –≤—ã–±–æ—Ä –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø—Å–µ–≤–¥–æ—Å–ª—É—á–∞–π–Ω–æ, –Ω–∞—á–∏–Ω–∞—è —Å Go 1.18 ‚Äî —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ fairness, —á—Ç–æ —É–º–µ–Ω—å—à–∞–µ—Ç –≥–æ–ª–æ–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–æ—â–∞–µ—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—é –º–µ–∂–¥—É –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏.

---

## –ö—Ä–∞—Ç–∫–∏–π –∫–æ–Ω—Å–ø–µ–∫—Ç

- `select` ‚Äî —ç—Ç–æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–π –∞–Ω–∞–ª–æ–≥ `switch` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞–Ω–∞–ª–∞–º–∏.
    
- –í—ã–±–æ—Ä –∫–µ–π—Å–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Å–µ–≤–¥–æ—Å–ª—É—á–∞–π–Ω–æ —Å—Ä–µ–¥–∏ –≥–æ—Ç–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
    
- –° Go 1.18 –≤–≤–µ–¥–µ–Ω–∞ **fairness-–º–æ–¥–µ–ª—å** –≤—ã–±–æ—Ä–∞ (work-conserving).
    
- –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã: fan-in, timeout, non-blocking polling.
    
- –û—à–∏–±–∫–∏: –∑–∞–±—ã—Ç—ã–µ `default`, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ nil-–∫–∞–Ω–∞–ª—É, –Ω–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã.
    

---

## –û–±–∑–æ—Ä —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å `switch`

```
select {
case msg := <-ch1:
    fmt.Println("received", msg)
case ch2 <- 42:
    fmt.Println("sent 42")
default:
    fmt.Println("nothing ready")
}
```

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç `switch`, `select` —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –∫–∞–Ω–∞–ª–∞–º–∏. –í—Å–µ –∫–µ–π—Å—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å (read/write) **–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**, –∏ –µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥–æ—Ç–æ–≤—ã ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω, **—Å–ª—É—á–∞–π–Ω–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–π**.

> [[–ö–∞–Ω–∞–ª—ã –≤ Go]] ¬∑ [[–ì–æ—Ä—É—Ç–∏–Ω—ã]] ¬∑ [[–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ—Ç–æ–∫–æ–≤]]

---

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—ã–±–æ—Ä –∫–µ–π—Å–∞ –≤ select

–ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º `select` —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `runtime.selectgo`, –∫–æ—Ç–æ—Ä—ã–π:

1. –ü–µ—Ä–µ–±–∏—Ä–∞–µ—Ç –∫–µ–π—Å—ã –∏ –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç `scase`-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.
    
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å—Ç—å –ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ –∫–∞–Ω–∞–ª–µ –¥–ª—è —á—Ç–µ–Ω–∏—è).
    
3. –ï—Å–ª–∏ –Ω–∏ –æ–¥–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–µ –≥–æ—Ç–æ–≤–∞ ‚Äî
    
    - –±–ª–æ–∫–∏—Ä—É–µ—Ç –≥–æ—Ä—É—Ç–∏–Ω—É (`gopark`) –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è,
        
    - –∏–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç `default`, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å.
        
4. –ï—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ü–∏–π –≥–æ—Ç–æ–≤—ã ‚Äî –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è **–æ–¥–Ω–∞ —Å–ª—É—á–∞–π–Ω–æ**, –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ–º `[]scase` —Å –ø–æ–º–æ—â—å—é `runtime.fastrandn`.
    

–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **work-conserving**, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–æ—Å—Ç–∞–∏–≤–∞–µ—Ç, –µ—Å–ª–∏ –µ—Å—Ç—å –≥–æ—Ç–æ–≤–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è.

> [!tip] Go –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç round-robin –∏–ª–∏ FIFO ‚Äî –≤—ã–±–æ—Ä –º–µ–∂–¥—É –≥–æ—Ç–æ–≤—ã–º–∏ –≤–µ—Ç–∫–∞–º–∏ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –ø—Å–µ–≤–¥–æ—Å–ª—É—á–∞–µ–Ω.

---

## Fairness –≤ Go 1.18+

–î–æ Go 1.18 `select` –±—ã–ª —Å–∫–ª–æ–Ω–µ–Ω –∫ –≥–æ–ª–æ–¥–∞–Ω–∏—é: –µ—Å–ª–∏ –æ–¥–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤–∞, –¥—Ä—É–≥–∏–µ –º–æ–≥–ª–∏ –Ω–µ –ø–æ–ª—É—á–∏—Ç—å —à–∞–Ω—Å–∞.

–ù–∞—á–∏–Ω–∞—è —Å **Go 1.18**, –≤–Ω–µ–¥—Ä–µ–Ω–∞ **fairness-–º–æ–¥–µ–ª—å**:

- –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ `scase` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ (`O(1)` –Ω–∞ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å).
    
- –ü–æ–≤–µ–¥–µ–Ω–∏–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–æ–ª–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º –≤ –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö.
    
- –ú–æ–¥–µ–ª—å –ø–æ–ª–µ–∑–Ω–∞ –¥–ª—è **—Å–µ—Ç–µ–≤—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤**, multiplexing, broker-—Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.
    

> [[Context –≤ Go]] –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å `select` –¥–ª—è graceful shutdown‚Äô–∞ –∏–ª–∏ timeout.

---

## –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏ –∞–Ω—Ç–∏-–ø–∞—Ç—Ç–µ—Ä–Ω—ã

### Fan-in

```
select {
case v := <-in1:
    out <- v
case v := <-in2:
    out <- v
}
```

–û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –≤ –æ–¥–∏–Ω.

### Timeout

```
select {
case msg := <-in:
    // –æ–±—Ä–∞–±–æ—Ç–∫–∞
case <-time.After(time.Second):
    fmt.Println("timeout")
}
```

### –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è

```
select {
case <-high:
    // high-priority work
default:
    select {
    case <-low:
        // fallback
    }
}
```

### Non-blocking poll

```
select {
case msg := <-ch:
    fmt.Println(msg)
default:
    fmt.Println("not ready")
}
```

### Nil-–∫–∞–Ω–∞–ª—ã –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

```
var ch chan int = nil
select {
case <-ch:
    // –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è
case <-time.After(time.Second):
    fmt.Println("timeout")
}
```

> [!warning] –ù—é–∞–Ω—Å—ã –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏
> 
> - ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `default` –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ busy-loop –∏ –Ω–∞–≥—Ä—É–∑–∫–µ –Ω–∞ CPU.
>     
> - ‚õî –ó–∞–∫—Ä—ã—Ç—ã–µ –∫–∞–Ω–∞–ª—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç zero-value –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ ‚Üí –Ω—É–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —ç—Ç–æ —è–≤–Ω–æ.
>     
> - ‚ö†Ô∏è `nil`-–∫–∞–Ω–∞–ª—ã –±–ª–æ–∫–∏—Ä—É—é—Ç –Ω–∞–≤—Å–µ–≥–¥–∞ ‚Äî —É–¥–æ–±–Ω–æ –ø—Ä–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ `select`-–≤–µ—Ç–∫–∞–º–∏.
>     
> - üí• –í–æ–∑–º–æ–∂–µ–Ω starvation –±–µ–∑ fairness (–¥–æ Go 1.18).
>     

---

## FAQ

> [!faq]  
> **Q:** –ü–æ—á–µ–º—É Go –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç round-robin?  
> **A:** –≠—Ç–æ –º–µ—à–∞–ª–æ –±—ã –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç–∏ –∏ work-conserving –ø–æ–≤–µ–¥–µ–Ω–∏—é. –°–ª—É—á–∞–π–Ω–æ—Å—Ç—å —Å–Ω–∏–∂–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å starvation.
> 
> **Q:** –ú–æ–∂–Ω–æ –ª–∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–µ–π—Å–æ–≤?  
> **A:** –ù–µ—Ç, –µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–µ—Ç–æ–∫ –≥–æ—Ç–æ–≤—ã ‚Äî –±—É–¥–µ—Ç –≤—ã–±—Ä–∞–Ω –æ–¥–∏–Ω —Å–ª—É—á–∞–π–Ω–æ.
> 
> **Q:** –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –∏–∑ –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–∞–Ω–∞–ª–∞?  
> **A:** –ë—É–¥–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–æ zero-value, `select` –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å —ç—Ç–æ—Ç –∫–µ–π—Å.
> 
> **Q:** –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç?  
> **A:** –ß–µ—Ä–µ–∑ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ `select`, –∫–∞–∫ workaround.

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- https://go.dev/doc/go1.17_spec ‚Äî –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å `select` –≤ Go.
    
- https://github.com/golang/go/blob/master/src/runtime/select.go ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `runtime.selectgo` –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö.
    
- https://swatimodi.com/posts/go-select-demystified/ ‚Äî —Å—Ç–∞—Ç—å—è —Å —Ä–∞–∑–±–æ—Ä–æ–º fairness –∏ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤.
    
- https://go.dev/blog/go-concurrency-patterns ‚Äî –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –æ—Ç Go team.
    
- https://dave.cheney.net ‚Äî –±–ª–æ–≥ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ —Å–ª–æ–∂–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤.